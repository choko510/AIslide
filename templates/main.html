<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIslide - ダッシュボード</title>
    <link rel="stylesheet" href="{{ url_for('static', path='style.css') }}">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.7.2/css/all.css">
</head>

<body class="page-transition">

    <div class="dashboard-container">
        <aside class="sidebar">
            <h1>AIslide</h1>
            <button class="create-new-btn" id="create-new-slide-btn">
                <i class="fas fa-plus"></i>
                <span>新しいプレゼンテーション</span>
            </button>
            <!-- 他のメニュー項目をここに追加可能 -->
        </aside>

        <main class="main-content">
            <header class="header">
                <div id="auth-area">
                    <!-- 認証状態に応じてJSで内容を切り替え -->
                </div>
            </header>
            <div class="content-area">
                <h2>あなたのプレゼンテーション</h2>
                <div class="slide-list" id="slide-list">
                    <!-- スライドはJSで動的に追加されます -->
                </div>
            </div>
        </main>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" aria-label="閉じる"><i class="fas fa-times"></i></button>
            <h2>ログイン</h2>
            <form id="login-form">
                <input type="text" id="login-username" placeholder="ユーザー名" required>
                <input type="password" id="login-password" placeholder="パスワード" required>
                <button type="submit">ログイン</button>
            </form>
            <div class="modal-switch">
                アカウントをお持ちでないですか？ <a id="show-register-modal">新規登録</a>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="register-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" aria-label="閉じる"><i class="fas fa-times"></i></button>
            <h2>新規登録</h2>
            <form id="register-form">
                <input type="text" id="register-username" placeholder="ユーザー名" required>
                <input type="password" id="register-password" placeholder="パスワード" required>
                <button type="submit">登録</button>
            </form>
            <div class="modal-switch">
                アカウントをお持ちですか？ <a id="show-login-modal">ログイン</a>
            </div>
        </div>
    </div>

    <!-- Custom Alert -->
    <div id="custom-alert" class="custom-alert">
        <div class="alert-content">
            <i id="alert-icon" class="alert-icon"></i>
            <div id="alert-title" class="alert-title"></div>
            <div id="alert-message" class="alert-message"></div>
            <div class="alert-buttons">
                <button id="alert-ok-btn" class="alert-button primary">OK</button>
                <button id="alert-cancel-btn" class="alert-button secondary" style="display: none;">キャンセル</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" aria-label="閉じる"><i class="fas fa-times"></i></button>
            <h2>設定</h2>
            <div class="settings-section">
                <label for="settings-language-select">言語 / Language:</label>
                <select id="settings-language-select">
                    <option value="ja">日本語</option>
                    <option value="en">English</option>
                </select>
            </div>

            <div class="settings-section">
                <label for="settings-theme-select">テーマ / Theme:</label>
                <select id="settings-theme-select">
                    <option value="light">ライト / Light</option>
                    <option value="dark">ダーク / Dark</option>
                </select>
            </div>

            <div class="settings-section">
                <h3>アカウント設定</h3>
                <div class="account-setting">
                    <span>ユーザー名: <span id="current-username"></span></span>
                    <button id="update-username-btn" class="btn-link">変更</button>
                </div>
                <div class="account-setting">
                    <span>パスワード</span>
                    <button id="update-password-btn" class="btn-link">変更</button>
                </div>
            </div>

            <div class="settings-buttons">
                <button id="settings-save-btn" class="settings-button primary">保存 / Save</button>
                <button id="settings-cancel-btn" class="settings-button secondary">キャンセル / Cancel</button>
            </div>
        </div>
    </div>

    <!-- Update Username Modal -->
    <div id="update-username-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" aria-label="閉じる"><i class="fas fa-times"></i></button>
            <h2>ユーザー名の変更</h2>
            <form id="update-username-form">
                <input type="text" id="new-username" placeholder="新しいユーザー名" required>
                <input type="password" id="password-for-username" placeholder="現在のパスワード" required>
                <button type="submit">更新</button>
            </form>
        </div>
    </div>

    <!-- Update Password Modal -->
    <div id="update-password-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" aria-label="閉じる"><i class="fas fa-times"></i></button>
            <h2>パスワードの変更</h2>
            <form id="update-password-form">
                <input type="password" id="current-password" placeholder="現在のパスワード" required>
                <input type="password" id="new-password" placeholder="新しいパスワード" required>
                <button type="submit">更新</button>
            </form>
        </div>
    </div>

    <!-- Choice Modal: 新しいプレゼンテーションの作成方法選択 -->
    <div id="new-presentation-modal" class="modal">
        <div class="modal-content new-presentation">
            <button class="modal-close" id="new-presentation-cancel" aria-label="閉じる">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">作成方法を選択</h2>
            <p class="modal-subtitle">どちらの方法で始めますか？後から内容は編集できます。</p>

            <div class="choice-grid">
                <!-- plan 遷移はアニメーションしたいので data-no-transition は付けない -->
                <button id="create-with-ai" class="choice-card primary" data-transition="fade" data-href="/plan/">
                    <div class="choice-icon">
                        <i class="fas fa-wand-magic-sparkles"></i>
                    </div>
                    <div class="choice-text">
                        <div class="choice-title">AIで作成</div>
                        <div class="choice-desc">トピックや目的を入力すると、AIがアウトラインを作成します</div>
                    </div>
                </button>

                <button id="create-from-scratch" class="choice-card">
                    <div class="choice-icon">
                        <i class="fas fa-pen-to-square"></i>
                    </div>
                    <div class="choice-text">
                        <div class="choice-title">0から作成</div>
                        <div class="choice-desc">空のプレゼンテーションから自由に作り始めます</div>
                    </div>
                </button>
            </div>

            <div class="modal-actions">
                <button class="ghost-btn" id="new-presentation-cancel-footer">キャンセル</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <script type="module" src="{{ url_for('static', path='app.js') }}"></script>
</body>

</html>